angular.module("SuhGeneral",[]),angular.module("SuhGeneral").directive("shLocalize",["shLocalizer",function(t){return{restrict:"A",scope:!1,link:function(e,r,n){if(angular.isDefined(n.shLocalize)){var a=t.get(n.shLocalize);a?r.html(a):t.ready().then(function(){var e=t.get(n.shLocalize);r.html(e?e:n.shLocalize)})}}}}]),angular.module("SuhGeneral").directive("shLocalizeAttr",["shLocalize",function(t){return{restrict:"A",scope:{},compile:function(e,r){var n,a,i=/^shLocalizeAttr(.+)/;angular.forEach(r.$attr,function(o,u){n=u.match(i),n&&n.length>1&&(a=t.get(r[u]),a?e.attr(n[1].toLowerCase(),a):t.ready().then(function(){var a=t.get(r[u]);a?e.attr(n[1].toLowerCase(),a):e.attr(r[u])}))})},link:function(t,e,r){console.log(r)}}}]),angular.module("SuhGeneral").provider("shApplicationData",[function(){var t={},e={get:function(e){return e?t[e]:t},set:function(e,r){if(angular.isObject(e))angular.forEach(e,function(e,r){t[e]=r});else{if(!angular.isString(e))throw new Error("Provided key is neither an object literal nor a string");t[e]=r}}};this.setData=function(e){t=e},this.setExtensions=function(t){for(var r in t)e[r]=angular.bind(e,t[r])},this.$get=[function(){var r=function(){Object.defineProperty(this,"data",{get:function(){return t}})};return r.prototype=e,new r}]}]),angular.module("SuhGeneral").provider("shLocalizer",[function(t){var e="\\$\\{",r="en_US",n="\\}";this.startTag=function(t){e=t},this.endTag=function(t){n=t},this.setLocale=function(t){r=t},this.$get=["shUtil","$http","$q","shLOCALE",function(t,r,a,i){var o,u={},s=!1,l=a.defer(),c=function(t){u=t,s=!0,l.resolve()},h=function(t){l.resolve("An error has occured")};return o={load:function(t){angular.isString(t)?r.get(t).success(c).error(h):angular.isObject(t)&&c(t)},ready:function(){return l.promise},isLoaded:function(){return s},get:function(e,r){var n=t.getDataAt(u,e);return n?o.format(n,r):void 0},format:function(t,r){return r?t.replace(new RegExp(e+"([\\S]+?)"+n,"g"),function(t,e){return r[e]||t}):t}}}]}]),angular.module("SuhGeneral").factory("shBlockNavigation",[function(){var t=function(t){window.onbeforeunload=function(){return t||"Are you sure you want to leave? you may lose any unsaved work"}},e=function(){window.onbeforeunload=void 0};return{block:t,unblock:e}}]),angular.module("SuhGeneral").factory("shCache",["shStorage","shUtil",function(t,e){var r={},n=function(e,r){this.data={},this.key=e,this.enabled=!0,this.valid=!0,this.persistence=r||t,t.isEnabled()&&this.restore()};n.prototype={store:function(t,e){var r=this;if(this.enabled){if(angular.isArray(t))return void angular.forEach(t,function(t,e){r.data[t.key]=r.data[t.value]});angular.isObject(t)?r.data[t.key]=t.value:r.data[t]=e}},isEnabled:function(){return enabled},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},persist:function(){this.enabled&&this.valid&&this.persistence.store(this.key,this.data)},restore:function(){if(this.valid){this.enabled=!1;var t=this.persistence.getJSON(this.key);this.data=null!==t&&"undefined"!=typeof t&&angular.isObject(t)?t:{},this.enabled=!0}},clear:function(){this.valid&&this.enabled&&(this.data={})},get:function(t){if(this.enabled&&this.valid){var e=this.data[t];if("undefined"!=typeof e&&null!==e)return this.data[t]}},setStorage:function(t){this.persistence=t},getStorage:function(){return this.persistence},destroy:function(){this.data={},this.valid=!1}},r.appCache=new n("appCache",t);var a=function(t){return r[t]?r[t]:r[t]=new n(t)};return a.store=angular.bind(r.appCache,r.appCache.store),a.get=angular.bind(r.appCache,r.appCache.get),a.getCache=function(t){return r[t]},a.setCache=function(t,e){r[t]=e},a.clearCache=function(t){r[t]&&(r[t].destroy(),delete r[t])},a.restore=angular.bind(r.appCache,r.appCache.restore),a.setStorage=angular.bind(r.appCache,r.appCache.setStorage),a.getStorage=angular.bind(r.appCache,r.appCache.getStorage),a.disable=angular.bind(r.appCache,r.appCache.disable),a.enable=angular.bind(r.appCache,r.appCache.enable),a.persist=angular.bind(r.appCache,r.appCache.persist),a.clear=angular.bind(r.appCache,r.appCache.clear),a}]),angular.module("SuhGeneral").factory("shDataTransformer",[function(){var t=function(){this.data={},this.originalData={}};return t.prototype={original:function(){return this.originalData},input:function(t){return this.data=t,this.originalData=t,this},processor:function(t){return this.data=t(this.data),this},out:function(){return this.data}},function(){return new t}}]),angular.module("SuhGeneral").factory("shDeferredRequest",["$q","$http","shResponseHandler",function(t,e,r){return function(n,a,i,o,u,s,l){var c=t.defer(),h=s||(o?o.success:r)||r,f=l||(o?o.error:r)||r;return"get"===n.toLowerCase()||"undefined"==typeof i?e[n](a).success(h(c)).error(f(c)):e[n](a,i).success(h(c)).error(f(c)),c.promise}}]),angular.module("SuhGeneral").factory("shEventEmitter",[function(){function t(t){this.events=t||[],this.listeners={}}return t.prototype={addEventListener:function(t,e,r){if(-1===this.events.indexOf(t))throw new Error('The object does not support the event "'+t+'".');this.listeners=this.listeners||{},this.listeners[t]=this.listeners[t]||[];var n=r?angular.bind(r,e):e;n.fn=e,this.listeners[t].push(n)},removeEventListener:function(t,e){if(!this.listeners[t])throw new Error("Event '"+t+"' is not registered.");for(var r=0,n=this.listeners[t],a=n.length,i=-1;a>r;r++)if(n[r].fn===e){i=r;break}-1!==r&&this.listeners[t].splice(r,1)},trigger:function(t,e){if(this.listeners[t]){var r,n,a=this.listeners[t];for(r=0,n=a.length;n>r;r++)a[r](e)}},on:function(t,e,r){return this.addEventListener(t,e,r)}},t}]),angular.module("SuhGeneral").factory("shHttp",["$q","shDeferredRequest","shUtil",function(t,e,r){var n=function(t){if(this._model=t.model,!this._model)throw new Error("the model is missing, please provide a model name");this._defaults=t.defaults||{page:0,limit:20,orderBy:"id",order:"asc"},this._resource=r.capitalize(r.toCamelCase(t.model)),this._baseUrl=t.baseUrl||"/"+this._model+"/${id}",this._restfulUrl=t.restfulUrl||this._baseUrl,this._restfulCreate=t.restfulCreate||this._restfulUrl.replace(/$\{id\}/,"create"),this._urlTemplate=t.urlTemplate||"/${model}/${method}/${page}-${limit}/${orderBy}-${order}"},a=n.prototype;return a.prepareUrl=function(t){var e=angular.extend({},this._defaults,t);return r.tokenReplace(this._urlTemplate,e)},a.get=function(t){return this.httpGet(this._restfulUrl,{id:t})},a.update=function(t,e){return this.httpPut(this._restfulUrl,{id:t},e)},a.create=function(t){return this.httpPost(this._restfulCreate,{id:"create"},t)},a["delete"]=function(t){return angular.isArray(t)?this.httpPost(this._restfulUrl,{id:"delete"},{ids:t}):this.httpDelete(this._restfulUrl,{id:t})},a.httpPost=function(t,n,a){return e.call(this,"post",r.tokenReplace(t,n||{}),a)},a.httpPut=function(t,n,a){return e.call(this,"put",r.tokenReplace(t,n||{}),a)},a.httpGet=function(t,n){return e.call(this,"get",r.tokenReplace(t,n||{}))},a.httpDelete=function(t,n){return e.call(this,"delete",r.tokenReplace(t,n||{}))},a.httpHead=function(t,n){return e.call(this,"head",r.tokenReplace(t,n||{}))},n}]),angular.module("SuhGeneral").factory("shHttpModel",["shHttp","shUtil",function(t,e){return function(r,n){var a=function(){t.call(this,r)};e.inherits(a,t);for(var i in n)a.prototype[i]=n[i];return new a}}]),angular.module("SuhGeneral").factory("shIdentityGenerator",[function(){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,r="x"==t?e:3&e|8;return r.toString(16)})}}]),angular.module("SuhGeneral").factory("shResponseHandler",[function(){var t=function(t,e){return e&&e.status?t.resolve(e.result):t.reject(e.reasons||e)},e=function(e){return function(r){t(e,r)}};return e.setHandler=function(e){t=e},e}]),angular.module("SuhGeneral").factory("shStorage",[function(){var t=!1,e={isEnabled:function(){return t},isSupported:function(){return angular.isDefined(window.localStorage)},enable:function(){t=!0&&e.isSupported()},disable:function(){t=!1},store:function(e,r){if(t){if(angular.isObject(e))for(var n in e)localStorage.setItem(n,angular.isObject(e[n])?JSON.stringify(e[n]):e[n]);else localStorage.setItem(e,JSON.stringify(r));return!0}return!1},remove:function(e){var r,n;if(t)if(angular.isArray(e))r=[],angular.forEach(e,function(t,e){if(n=localStorage.getItem(t)){try{n=JSON.parse(n)}catch(a){}r.push(n),localStorage.removeItem(t)}}),r=0===r.length?void 0:r;else{r=localStorage.getItem(e);try{r=JSON.parse(r)}catch(a){}localStorage.removeItem(e)}return r},get:function(e){if(t){var r=localStorage.getItem(e);if(r)return JSON.parse(r)}return void 0},_getType:function(e,r){if(!t)return null;var n=localStorage.getItem(e);return null!==n?r(n):void 0},getInteger:function(t){return e._getType(t,parseInt)},getFloat:function(t){return e._getType(t,parseFloat)},getJSON:function(t){return e._getType(t,JSON.parse)}};return e.enable(),e}]),angular.module("SuhGeneral").factory("shUtil",[function(){var t={extend:function(t,e,r){t.prototype=e.prototype,t.prototype.constructor=e,r&&(t.prototype=angular.extend({},t.prototype,r))},inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t.constructor},proxy:function(t,e){var r=e||this,n=arguments.length>2?Array.prototype.slice.call(agruments,2):[];return function(){var e=Array.prototype.slice.call(arguments,0);return t.apply(r,[].concat(n,e))}},format:function(t,e,r){var n,a;return n=angular.isString(this)?this.slice(0):t,a=angular.isString(this)?t:e,prefix=angular.isString(this)?e:r?r:":$",a&&angular.forEach(a,function(t,e){n=n.replace(angular.isString(e)?prefix.replace(/\$/,e):"?",t)}),n},map:function(t,e){var r=angular.isArray(t)?[]:angular.isObject(t)?[]:"";for(var n in t)r[n]=e(t[n]);return r},extractField:function(e,r){for(var n=angular.isArray(e)?e:this,a=[],i=0,o=n.length,u=-1;o>i;i++)u=t.getDataAt(n[i],r),u&&a.push(u);return a},identify:function(t){return t},filter:function(e,r){var n,a=(t.identity,[]);for(n in e)r(e[n],n,e)&&a.push(e[n]);return a},findIndexByField:function(e,r,n){for(var a=angular.isArray(e)?e:this,i=0,o=a.length;o>i;i++)if(t.getDataAt(a[i],r)==n)return i;return-1},existsByField:function(e,r,n){for(var a=0,i=e.length;i>a;a++)if(t.getDataAt(e[a],r)==n)return!0;return!1},removeByField:function(e,r,n){for(var a=0,i=e.length;i>a;a++)if(t.getDataAt(e[a],r)==n)return e.splice(a,1)[0];return void 0},removeAllByField:function(e,r,n){for(var a=[],i=0,o=e.length;o>i;i++)t.getDataAt(e[i],r)==n&&(a.push(e.splice(i,1)[0]),i--,o--);return a},findAllByField:function(e,r,n){for(var a=angular.isArray(e)?e:this,i=[],o=0,u=a.length;u>o;o++)t.getDataAt(a[o],r)==n&&i.push(a[o]);return i},findByField:function(e,r,n){for(var a=angular.isArray(e)?e:this,i=0,o=a.length;o>i;i++)if(t.getDataAt(a[i],r)==n)return a[i];return void 0},getDataAt:function(t,e){var r=e.match(/[^\.]+/gi),n=angular.isString(t)?this:t,a=0,i=r?r.length:0;for(a=0;i>a&&n;a++)n=n[r[a]];return n},setDataAt:function(t,e,r){var n=e.match(/[^\.]+/gi),a=angular.isString(t)?this:t,i=0,o=n?n.length-1:0;for(i=0;o>i;i++)a=a[n[i]]=a[n[i]]||{};return a[n[o]]=r,a},toSnakeCase:function(t){var e=t.match(/[A-Z]?[a-z0-9]+(?=[A-Z])?/g),r=t,n=e?e.length:0,a=1;if(n>0){for(r=e[0];n>a;a++)r=r+"_"+e[a];r=r.toLowerCase()}return r},toCamelCase:function(e){var r=e.match(/[^\-\_\.]+/g);return r&&r.length>1?r[0].toLowerCase()+t.map(r.slice(1),function(t){return t[0].toUpperCase()+t.slice(1)}).join(""):r[0].toLowerCase()},capitalize:function(t){if(!angular.isString(t))throw new Error("invalid parameter passed, expecting a string");return t.length>1?t[0].toUpperCase()+t.slice(1):t.toUpperCase()},lowerize:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},tokenReplace:function(t,e,r,n){if(!t)return t;var a=("("+["[","]","(",")","{","}","-",".","$"].join("|")+")",r||"\\$\\{"),i=n||"\\}";return a=a.replace(/^(\(|\)|\[|\]|\.|\$|\-|\{|\})$/g,function(t,e){return"\\"+e}),i=i.replace(/^(\(|\)|\[|\]|\.|\$|\-|\{|\})$/g,function(t,e){return"\\"+e}),t.replace(new RegExp(a+"([\\S]+?)"+i,"g"),function(t,r){return e[r]||t})}};return t}]);