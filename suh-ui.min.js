angular.module("SuhUi",["SuhGeneral"]),angular.module("SuhUi").directive("shUiDialog",["shTemplatePathProcessor",function(t){return{restrict:"A",priority:0,replace:!0,templateUrl:t.getTemplatePath("dialog"),scope:!0,controller:["$scope","shDialog",function(t,e){function n(t){console.log(t),i.visible=!0,i.buttons=t.buttons,i.templateUrl=t.templateUrl,i.content=t.content,i.title=t.title,i.model=t.model,i.style=t||{},i.onTemplateLoad=t.onTemplateLoad}var i=this;i.title="",i.content="",i.model=null,i.buttons=[],i.visible=!1,i.templateUrl=null,i.style={},i.hasTemplateUrl=function(){return i.templateUrl},i.hasButtons=function(){return i.buttons.length>0},i.reset=function(){i.title="",i.content="",i.model=null,i.buttons=[],i.visible=!1,i.templateUrl=null},i.close=function(){i.answer(-1)},i.answer=function(t,n){n&&n.action&&angular.isFunction(n.action)&&n.action(),i.reset(),e.answer(t)},e.addEventListener("ui.ShowDialog",n,this)}],controllerAs:"dialogCtrl",link:function(t,e,n){e.draggable&&e.draggable({handle:e.find(".ui-dialog-heading").get(0)})}}}]),angular.module("SuhUi").directive("shUiToast",["shTemplatePathProcessor","$timeout",function(t,e){return{restrict:"A",replace:!0,controller:["$scope","$q","shToast",function(t,n,i){function o(t){r.toasts.length;r.toasts.push(t),t.delay&&-1!=t.delay&&e(function(){r.remove(t)},t.delay)}var r=this;this.toasts=[],this.remove=function(t){var e=r.toasts.indexOf(t);-1!=e&&(r.toasts.splice(e,1),t.defer.resolve(t))},i.addEventListener("ui.ShowToast",o,r)}],controllerAs:"toastCtrl",templateUrl:t.getTemplatePath("toast"),link:function(t,e,n){}}}]),angular.module("SuhUi").provider("shTemplatePathProcessor",[function(){var t=this;this.paths={},this.pattern="/templates/${docType}.template.html",this.add=function(e,n){t.paths[e]=n},this.setTemplatePathPattern=function(e){t.pattern=e},this.$get=[function(){return{getTemplatePath:function(e){var n,i={docType:e},o=/\$\{([\S]+?)\}/g;return t.paths[e]?t.paths[e]:n=t.pattern.replace(o,function(t,e,n){return i[e]})}}}]}]),angular.module("SuhUi").factory("shDialog",["$q","shEventEmitter","shUtil",function(t,e,n){var i=function(){e.call(this,["ui.ShowDialog"]),this.reset()};n.inherits(i,e);var o=i.prototype;return o.title=function(t){return this._title=t,this},o.content=function(t){return this._content=t,this},o.templateUrl=function(t){return this._templateUrl=t,this},o.buttons=function(t){return this._buttons=t,this},o.show=function(){var e=this;return this._df=t.defer(),this.trigger("ui.ShowDialog",{title:e._title,content:e._content,templateUrl:e._templateUrl,visible:!0,buttons:e._buttons,model:e._model}),this._df.promise},o.answer=function(t){-1!==t?this._df.resolve(t):this._df.reject(-1),this.reset()},o.data=function(t){return this._model=t,this},o.reset=function(){this._title="",this._content="",this._templateUrl="",this._buttons=[],this._model=null},new i}]),angular.module("SuhUi").factory("shToast",["$q","$timeout","shEventEmitter","shUtil",function(t,e,n,i){var o=function(){n.call(this,["ui.ShowToast"])};i.inherits(o,n);var r=o.prototype;return r.toast=function(e,n,i,o){var r=e.text||e,s=e.action||o,l=e.delay||n||-1,a=e.progress||i,u=t.defer();return this.trigger("ui.ShowToast",{text:r,delay:l,action:s,progress:a,defer:u}),u.promise},new o}]);